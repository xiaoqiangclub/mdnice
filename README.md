<div align="center">

![mdnice](images/mdnice.jpg)

[![PyPI version](https://badge.fury.io/py/mdnice.svg)](https://badge.fury.io/py/mdnice) [![Python Version](https://img.shields.io/badge/Python-3.8%2B-blue.svg)](https://pypi.org/project/mdnice/) [![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](LICENSE) 

</div>



## ğŸ“– ç›®å½•

- [âœ¨ åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ“¦ å®‰è£…](#-å®‰è£…)
- [ğŸ’¡ ä½¿ç”¨æ–‡æ¡£](#-ä½¿ç”¨æ–‡æ¡£)
  - [åŸºç¡€ç”¨æ³•](#åŸºç¡€ç”¨æ³•)
  - [æ‰¹é‡è½¬æ¢](#æ‰¹é‡è½¬æ¢)
  - [è‡ªå®šä¹‰ä¸»é¢˜](#è‡ªå®šä¹‰ä¸»é¢˜)
  - [å¤šå¹³å°è½¬æ¢](#å¤šå¹³å°è½¬æ¢)
  - [å›¾ç‰‡ä¸Šä¼ ](#å›¾ç‰‡ä¸Šä¼ )
- [ğŸ¨ ä¸»é¢˜åˆ—è¡¨](#-ä¸»é¢˜åˆ—è¡¨)
- [ğŸ“š API å‚è€ƒ](#-api-å‚è€ƒ)
  - [å¹³å°ä¸“ç”¨å‡½æ•°](#å¹³å°ä¸“ç”¨å‡½æ•°)
  - [é€šç”¨è½¬æ¢å‡½æ•°](#é€šç”¨è½¬æ¢å‡½æ•°)
  - [æ ¸å¿ƒç±»](#æ ¸å¿ƒç±»)
- [âš™ï¸ é…ç½®é€‰é¡¹](#ï¸-é…ç½®é€‰é¡¹)
- [ğŸ”§ é«˜çº§ç”¨æ³•](#-é«˜çº§ç”¨æ³•)
- [â“ å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [ğŸ’– æ‰“èµæ”¯æŒ](#-æ‰“èµæ”¯æŒ)
- [ğŸ“„ è®¸å¯è¯](#-è®¸å¯è¯)

---
# ğŸ“ mdnice

> å°† Markdown è½¬æ¢ä¸ºå¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ã€ç¨€åœŸæ˜é‡‘æ”¯æŒçš„å¯Œæ–‡æœ¬æ ¼å¼

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- âœ… **å¤šå¹³å°æ”¯æŒ** - ä¸€é”®è½¬æ¢ä¸ºå¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ã€ç¨€åœŸæ˜é‡‘æ ¼å¼
- âœ… **20+ç²¾ç¾ä¸»é¢˜** - å†…ç½®20ç§ç²¾å¿ƒè®¾è®¡çš„ä¸»é¢˜æ ·å¼ï¼Œéšå¿ƒé€‰æ‹©
- âœ… **æ‰¹é‡å¤„ç†** - æ”¯æŒæ‰¹é‡è½¬æ¢å¤šä¸ª Markdown æ–‡ä»¶
- âœ… **æ™ºèƒ½é‡è¯•** - ç½‘ç»œæ•…éšœè‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼Œç¡®ä¿è½¬æ¢æˆåŠŸ
- âœ… **å®Œæ•´æ ·å¼** - ä¿ç•™æ‰€æœ‰å†…è”æ ·å¼ï¼Œç¡®ä¿æ ¼å¼å®Œç¾è¿˜åŸ
- âœ… **è‡ªå®šä¹‰ç¼–è¾‘å™¨** - æ”¯æŒä½¿ç”¨è‡ªå®šä¹‰éƒ¨ç½²çš„ markdown-nice ç¼–è¾‘å™¨
- âœ… **å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ ** - æ”¯æŒæœ¬åœ°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ åˆ°å›¾åºŠ 
- âœ… **é›¶é…ç½®** - Selenium è‡ªåŠ¨ç®¡ç† ChromeDriverï¼Œå¼€ç®±å³ç”¨ 

### ğŸ›¡ï¸ ç¨³å®šæ€§ä¿éšœ

- ğŸ”„ **è‡ªåŠ¨å®¹é”™** - ç¼–è¾‘å™¨åœ°å€æ•…éšœè‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨åœ°å€
- ğŸ”„ **æ™ºèƒ½é™çº§** - å¤šç§HTMLè·å–æ–¹æ¡ˆï¼Œç¡®ä¿è½¬æ¢æˆåŠŸ
- ğŸ”„ **é”™è¯¯é€šçŸ¥** - å¯è‡ªå®šä¹‰é”™è¯¯å›è°ƒå‡½æ•°ï¼Œå®æ—¶æŒæ¡è½¬æ¢çŠ¶æ€
- ğŸ”„ **è¯¦ç»†æ—¥å¿—** - å®æ—¶è¾“å‡ºè½¬æ¢è¿›åº¦å’ŒçŠ¶æ€ï¼Œæ–¹ä¾¿è°ƒè¯•
- ğŸ”„ **é©±åŠ¨è‡ªåŠ¨ç®¡ç†** - Selenium 4.6+ è‡ªåŠ¨ä¸‹è½½å’Œç®¡ç† ChromeDriver

### ğŸ“Š æ”¯æŒå¹³å°

| å¹³å° | å‡½æ•° | è¯´æ˜ |
|------|------|------|
| ğŸ“± å¾®ä¿¡å…¬ä¼—å· | `to_wechat()` | å®Œç¾é€‚é…å…¬ä¼—å·ç¼–è¾‘å™¨ï¼Œæ”¯æŒä»£ç é«˜äº® |
| ğŸ“˜ çŸ¥ä¹ | `to_zhihu()` | é€‚é…çŸ¥ä¹æ–‡ç« ç¼–è¾‘å™¨ï¼Œä¿ç•™æ ·å¼ |
| ğŸ’ ç¨€åœŸæ˜é‡‘ | `to_juejin()` | é€‚é…æ˜é‡‘æ–‡ç« ç¼–è¾‘å™¨ï¼Œä¸“ä¸šç¾è§‚ |

### ğŸ¨ ç²¾é€‰ä¸»é¢˜

å†…ç½® **20ç§** ç²¾ç¾ä¸»é¢˜ï¼ŒåŒ…æ‹¬ï¼š

- ğŸŒ¸ **è”·è–‡ç´«** (rose) - ä¼˜é›…çš„ç´«è‰²ç³»
- ğŸ–¤ **æå®¢é»‘** (geekBlack) - ç¨‹åºå‘˜æœ€çˆ±
- ğŸ”µ **ç§‘æŠ€è“** (scienceBlue) - ç§‘æŠ€æ„Ÿåè¶³
- ğŸŒ¿ **èŒç»¿** (cuteGreen) - æ¸…æ–°è‡ªç„¶
- ğŸ¯ **å‰ç«¯ä¹‹å·…åŒæ¬¾** (blueMountain) - ä¸“ä¸šæŠ€æœ¯é£æ ¼
- ... æ›´å¤šä¸»é¢˜ç­‰ä½ æ¢ç´¢

### ğŸ“¤ å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½

- ğŸ–¼ï¸ **æ™ºèƒ½è¯†åˆ«** - è‡ªåŠ¨è¯†åˆ«æœ¬åœ°å›¾ç‰‡ã€ç½‘ç»œå›¾ç‰‡ã€DataURL
- ğŸ¯ **çµæ´»æ¨¡å¼** - æ”¯æŒ3ç§ä¸Šä¼ æ¨¡å¼ï¼ˆä»…æœ¬åœ°/ä»…ç½‘ç»œ/å…¨éƒ¨ï¼‰
- ğŸ”Œ **æ˜“äºé›†æˆ** - ç®€å•å›è°ƒå‡½æ•°å³å¯å¯¹æ¥ä»»ä½•å›¾åºŠ
- âš¡ **é«˜æ•ˆå¤„ç†** - æ‰¹é‡ä¸Šä¼ ï¼Œé”™è¯¯å®¹é”™
- ğŸŒ **å¤šå›¾åºŠæ”¯æŒ** - å†…ç½®å¤šç§ä¸»æµå›¾åºŠä¸Šä¼ å™¨ï¼ˆSM.MSã€ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘OSSã€GitHubç­‰ï¼‰

#### æ”¯æŒçš„å›¾åºŠä¸Šä¼ å™¨

æˆ‘ä»¬æä¾›äº†å¤šç§å›¾åºŠä¸Šä¼ å™¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

| å›¾åºŠåç§° | ç±»å | ç‰¹ç‚¹ | ä½¿ç”¨åœºæ™¯ |
|---------|------|----|---------|
| SM.MS | `SMUploader` | å…è´¹ï¼Œ5MBé™åˆ¶ | ä¸´æ—¶ä¸Šä¼  |
| ImgURL | `ImgURLUploader` | å…è´¹ï¼Œ10MBé™åˆ¶ | å…è´¹å›¾åºŠ |
| è·¯è¿‡å›¾åºŠ | `LuoGuoUploader` | å…è´¹ï¼Œæ— éœ€æ³¨å†Œ | å¿«é€Ÿä¸Šä¼  |
| ä¸ƒç‰›äº‘ | `QiniuUploader` | 10GBå…è´¹å­˜å‚¨ | é•¿æœŸå­˜å‚¨ |
| é˜¿é‡Œäº‘OSS | `AliyunOSSUploader` | 40GBå…è´¹å­˜å‚¨ | ä¼ä¸šçº§ |
| åˆæ‹äº‘ | `UpyunUploader` | 10GBå…è´¹å­˜å‚¨ | ç¨³å®šå¯é  |
| GitHub | `GitHubUploader` | å®Œå…¨å…è´¹ï¼Œæ— é™æµé‡ | æŠ€æœ¯åšå®¢ |
| æœ¬åœ°å­˜å‚¨ | `LocalStorageUploader` | ä¿å­˜åˆ°æœ¬åœ°ç›®å½• | æœ¬åœ°é¢„è§ˆ |

#### ä¾¿æ·å‡½æ•°

ä¸ºäº†ç®€åŒ–ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¾¿æ·å‡½æ•°ï¼š

- `create_smms_uploader()` - åˆ›å»º SM.MS ä¸Šä¼ å‡½æ•°
- `create_qiniu_uploader()` - åˆ›å»ºä¸ƒç‰›äº‘ä¸Šä¼ å‡½æ•°
- `create_github_uploader()` - åˆ›å»º GitHub ä¸Šä¼ å‡½æ•°
- `create_local_uploader()` - åˆ›å»ºæœ¬åœ°å­˜å‚¨ä¸Šä¼ å‡½æ•°

#### åœ¨ä¸»å‡½æ•°ä¸­çš„è°ƒç”¨æ–¹æ³•

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼š

```python
from mdnice import to_wechat, create_smms_uploader

# æ–¹æ³•1: ä½¿ç”¨ä¾¿æ·å‡½æ•°
smms_uploader = create_smms_uploader(
    api_token='YOUR_TOKEN',
    api_domain='https://smms.app'  # å›½å†…ä¼˜åŒ–åŸŸå
)

html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=smms_uploader,      # ä¼ å…¥ä¸Šä¼ å‡½æ•°
    image_upload_mode='local'          # ä¸Šä¼ æ¨¡å¼ï¼šlocal/remote/all
)

# æ–¹æ³•2: ä½¿ç”¨å…·ä½“çš„ä¸Šä¼ å™¨ç±»
from mdnice.image_uploaders import SMUploader

uploader = SMUploader(
    api_token='YOUR_TOKEN',
    api_domain='https://smms.app'
)

html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=uploader.upload,    # ä¼ å…¥uploadæ–¹æ³•
    image_upload_mode='all'            # ä¸Šä¼ æ‰€æœ‰å›¾ç‰‡
)

# æ–¹æ³•3: è‡ªå®šä¹‰ä¸Šä¼ å‡½æ•°
def my_custom_uploader(image_path: str) -> str:
    """è‡ªå®šä¹‰ä¸Šä¼ é€»è¾‘"""
    # ä½ çš„ä¸Šä¼ ä»£ç 
    return "https://your-cdn.com/image.jpg"

html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=my_custom_uploader,
    image_upload_mode='remote'         # åªä¸Šä¼ ç½‘ç»œå›¾ç‰‡
)
```

#### ä¸Šä¼ æ¨¡å¼è¯´æ˜

- `local`: åªä¸Šä¼ æœ¬åœ°å›¾ç‰‡æ–‡ä»¶
- `remote`: åªä¸Šä¼ ç½‘ç»œå›¾ç‰‡ï¼ˆé‡æ–°ä¸Šä¼ åˆ°ä½ çš„å›¾åºŠï¼‰
- `all`: ä¸Šä¼ æ‰€æœ‰ç±»å‹çš„å›¾ç‰‡ï¼ˆæœ¬åœ°+ç½‘ç»œ+DataURLï¼‰


### ğŸ“¤ å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½

- ğŸ–¼ï¸ **æ™ºèƒ½è¯†åˆ«** - è‡ªåŠ¨è¯†åˆ«æœ¬åœ°å›¾ç‰‡ã€ç½‘ç»œå›¾ç‰‡ã€DataURL
- ğŸ¯ **çµæ´»æ¨¡å¼** - æ”¯æŒ3ç§ä¸Šä¼ æ¨¡å¼ï¼ˆä»…æœ¬åœ°/ä»…ç½‘ç»œ/å…¨éƒ¨ï¼‰
- ğŸ”Œ **æ˜“äºé›†æˆ** - ç®€å•å›è°ƒå‡½æ•°å³å¯å¯¹æ¥ä»»ä½•å›¾åºŠ
- âš¡ **é«˜æ•ˆå¤„ç†** - æ‰¹é‡ä¸Šä¼ ï¼Œé”™è¯¯å®¹é”™
- ğŸŒ **å¤šå›¾åºŠæ”¯æŒ** - å†…ç½®å¤šç§ä¸»æµå›¾åºŠä¸Šä¼ å™¨ï¼ˆSM.MSã€ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘OSSã€GitHubç­‰ï¼‰

#### æ”¯æŒçš„å›¾åºŠä¸Šä¼ å™¨

æˆ‘ä»¬æä¾›äº†å¤šç§å›¾åºŠä¸Šä¼ å™¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

| å›¾åºŠåç§° | ç±»å | ç‰¹ç‚¹ | ä½¿ç”¨åœºæ™¯ |
|---------|------|----|---------|
| SM.MS | `SMUploader` | å…è´¹ï¼Œ5MBé™åˆ¶ | ä¸´æ—¶ä¸Šä¼  |
| ImgURL | `ImgURLUploader` | å…è´¹ï¼Œ10MBé™åˆ¶ | å…è´¹å›¾åºŠ |
| è·¯è¿‡å›¾åºŠ | `LuoGuoUploader` | å…è´¹ï¼Œæ— éœ€æ³¨å†Œ | å¿«é€Ÿä¸Šä¼  |
| ä¸ƒç‰›äº‘ | `QiniuUploader` | 10GBå…è´¹å­˜å‚¨ | é•¿æœŸå­˜å‚¨ |
| é˜¿é‡Œäº‘OSS | `AliyunOSSUploader` | 40GBå…è´¹å­˜å‚¨ | ä¼ä¸šçº§ |
| åˆæ‹äº‘ | `UpyunUploader` | 10GBå…è´¹å­˜å‚¨ | ç¨³å®šå¯é  |
| GitHub | `GitHubUploader` | å®Œå…¨å…è´¹ï¼Œæ— é™æµé‡ | æŠ€æœ¯åšå®¢ |
| æœ¬åœ°å­˜å‚¨ | `LocalStorageUploader` | ä¿å­˜åˆ°æœ¬åœ°ç›®å½• | æœ¬åœ°é¢„è§ˆ |

#### ä¾¿æ·å‡½æ•°

ä¸ºäº†ç®€åŒ–ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¾¿æ·å‡½æ•°ï¼š

- `create_smms_uploader()` - åˆ›å»º SM.MS ä¸Šä¼ å‡½æ•°
- `create_qiniu_uploader()` - åˆ›å»ºä¸ƒç‰›äº‘ä¸Šä¼ å‡½æ•°
- `create_github_uploader()` - åˆ›å»º GitHub ä¸Šä¼ å‡½æ•°
- `create_local_uploader()` - åˆ›å»ºæœ¬åœ°å­˜å‚¨ä¸Šä¼ å‡½æ•°

#### åœ¨ä¸»å‡½æ•°ä¸­çš„è°ƒç”¨æ–¹æ³•

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼š

```python
from mdnice import to_wechat, create_smms_uploader

# æ–¹æ³•1: ä½¿ç”¨ä¾¿æ·å‡½æ•°
smms_uploader = create_smms_uploader(
    api_token='YOUR_TOKEN',
    api_domain='https://smms.app'  # å›½å†…ä¼˜åŒ–åŸŸå
)

html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=smms_uploader,      # ä¼ å…¥ä¸Šä¼ å‡½æ•°
    image_upload_mode='local'          # ä¸Šä¼ æ¨¡å¼ï¼šlocal/remote/all
)

# æ–¹æ³•2: ä½¿ç”¨å…·ä½“çš„ä¸Šä¼ å™¨ç±»
from mdnice.image_uploaders import SMUploader

uploader = SMUploader(
    api_token='YOUR_TOKEN',
    api_domain='https://smms.app'
)

html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=uploader.upload,    # ä¼ å…¥uploadæ–¹æ³•
    image_upload_mode='all'            # ä¸Šä¼ æ‰€æœ‰å›¾ç‰‡
)

# æ–¹æ³•3: è‡ªå®šä¹‰ä¸Šä¼ å‡½æ•°
def my_custom_uploader(image_path: str) -> str:
    """è‡ªå®šä¹‰ä¸Šä¼ é€»è¾‘"""
    # ä½ çš„ä¸Šä¼ ä»£ç 
    return "https://your-cdn.com/image.jpg"

html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=my_custom_uploader,
    image_upload_mode='remote'         # åªä¸Šä¼ ç½‘ç»œå›¾ç‰‡
)
```

#### ä¸Šä¼ æ¨¡å¼è¯´æ˜

- `local`: åªä¸Šä¼ æœ¬åœ°å›¾ç‰‡æ–‡ä»¶
- `remote`: åªä¸Šä¼ ç½‘ç»œå›¾ç‰‡ï¼ˆé‡æ–°ä¸Šä¼ åˆ°ä½ çš„å›¾åºŠï¼‰
- `all`: ä¸Šä¼ æ‰€æœ‰ç±»å‹çš„å›¾ç‰‡ï¼ˆæœ¬åœ°+ç½‘ç»œ+DataURLï¼‰


- ğŸ–¼ï¸ **æ™ºèƒ½è¯†åˆ«** - è‡ªåŠ¨è¯†åˆ«æœ¬åœ°å›¾ç‰‡ã€ç½‘ç»œå›¾ç‰‡ã€DataURL
- ğŸ¯ **çµæ´»æ¨¡å¼** - æ”¯æŒ3ç§ä¸Šä¼ æ¨¡å¼ï¼ˆä»…æœ¬åœ°/ä»…ç½‘ç»œ/å…¨éƒ¨ï¼‰
- ğŸ”Œ **æ˜“äºé›†æˆ** - ç®€å•å›è°ƒå‡½æ•°å³å¯å¯¹æ¥ä»»ä½•å›¾åºŠ
- âš¡ **é«˜æ•ˆå¤„ç†** - æ‰¹é‡ä¸Šä¼ ï¼Œé”™è¯¯å®¹é”™

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•çš„ä½¿ç”¨

```python
from mdnice import to_wechat

# ä¸€è¡Œä»£ç å®Œæˆè½¬æ¢
html = to_wechat('article.md')
print(f"è½¬æ¢æˆåŠŸï¼HTMLé•¿åº¦ï¼š{len(html)}")
```

> ğŸ’¡ **é¦–æ¬¡è¿è¡Œæç¤º**ï¼šSelenium ä¼šè‡ªåŠ¨ä¸‹è½½åŒ¹é…çš„ ChromeDriverï¼ˆçº¦å‡ ç§’åˆ°å‡ åç§’ï¼‰ï¼Œåç»­è¿è¡Œä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚

### 5åˆ†é’Ÿä¸Šæ‰‹ç¤ºä¾‹

```python
from mdnice import to_wechat, to_zhihu, to_juejin

# ç¤ºä¾‹1ï¼šè½¬æ¢ä¸ºå¾®ä¿¡å…¬ä¼—å·æ ¼å¼
html = to_wechat(
    'article.md',
    theme='rose',              # ä½¿ç”¨è”·è–‡ç´«ä¸»é¢˜
    output_dir='output/wechat' # ä¿å­˜åˆ°æŒ‡å®šç›®å½•
)

# ç¤ºä¾‹2ï¼šè½¬æ¢ä¸ºçŸ¥ä¹æ ¼å¼
html = to_zhihu(
    'article.md',
    theme='geekBlack',         # æå®¢é»‘ä¸»é¢˜
    output_dir='output/zhihu'
)

# ç¤ºä¾‹3ï¼šè½¬æ¢ä¸ºæ˜é‡‘æ ¼å¼
html = to_juejin(
    'article.md',
    theme='scienceBlue',       # ç§‘æŠ€è“ä¸»é¢˜
    output_dir='output/juejin'
)

# ç¤ºä¾‹4ï¼šæ‰¹é‡è½¬æ¢
to_wechat(
    ['article1.md', 'article2.md', 'article3.md'],
    theme='random',            # éšæœºä¸»é¢˜
    output_dir='output'
)
```

### å›¾ç‰‡ä¸Šä¼ ç¤ºä¾‹ 

```python
from mdnice import to_wechat

# å®šä¹‰å›¾ç‰‡ä¸Šä¼ å‡½æ•°
def upload_image(image_path: str) -> str:
    """ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠï¼Œè¿”å›URL"""
    # ä½ çš„å›¾åºŠä¸Šä¼ é€»è¾‘
    # ...
    return "https://your-cdn.com/image.png"

# ä½¿ç”¨å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=upload_image,      # ä¼ å…¥ä¸Šä¼ å‡½æ•°
    image_upload_mode='local'         # åªä¸Šä¼ æœ¬åœ°å›¾ç‰‡
)
```

---

## ğŸ“¦ å®‰è£…

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.8+
- **æµè§ˆå™¨**: Chrome/Chromiumï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
- **é©±åŠ¨**: æ— éœ€æ‰‹åŠ¨å®‰è£…ï¼ˆSelenium 4.6+ è‡ªåŠ¨ç®¡ç†ï¼‰âœ¨

### å®‰è£…æ­¥éª¤

#### å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰

```bash
pip install mdnice
```

**å°±è¿™ä¹ˆç®€å•ï¼** ğŸ‰ å®‰è£…å®Œæˆåå³å¯ä½¿ç”¨ï¼ŒSelenium ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æµ‹ç³»ç»Ÿä¸­çš„ Chrome æµè§ˆå™¨ç‰ˆæœ¬
- âœ… ä¸‹è½½åŒ¹é…çš„ ChromeDriver
- âœ… ç¼“å­˜åˆ°æœ¬åœ°ï¼ˆåç»­ä½¿ç”¨æ— éœ€é‡å¤ä¸‹è½½ï¼‰

#### å…¶ä»–å®‰è£…æ–¹å¼

```bash
# ä½¿ç”¨ poetry
poetry add mdnice

# ä»æºç å®‰è£…
git clone https://github.com/xiaoqiangclub/mdnice.git
cd mdnice
pip install -e .
# æˆ–
poetry install
```

### éªŒè¯å®‰è£…

```python
from mdnice import to_wechat, __version__

# æŸ¥çœ‹ç‰ˆæœ¬
print(f"mdnice ç‰ˆæœ¬: {__version__}")

# æµ‹è¯•è½¬æ¢ï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½ ChromeDriverï¼‰
html = to_wechat("# æµ‹è¯•æ ‡é¢˜\n\nè¿™æ˜¯æµ‹è¯•å†…å®¹ã€‚")
print("âœ… å®‰è£…æˆåŠŸï¼" if html else "âŒ å®‰è£…å¤±è´¥")
```

**é¦–æ¬¡è¿è¡Œè¯´æ˜ï¼š**

è¿è¡Œæ—¶ä½ å¯èƒ½ä¼šçœ‹åˆ°ï¼š

```
INFO: Selenium Manager: driver found in cache: /path/to/chromedriver
```

è¿™è¡¨ç¤º Selenium æ­£åœ¨è‡ªåŠ¨ç®¡ç†é©±åŠ¨ï¼Œå®Œå…¨æ­£å¸¸ï¼

### å¯é€‰é…ç½®

<details>
<summary>ç‚¹å‡»å±•å¼€ï¼šç‰¹æ®Šåœºæ™¯ä¸‹çš„é…ç½®é€‰é¡¹</summary>

#### åœºæ™¯1ï¼šæ‰‹åŠ¨æŒ‡å®š ChromeDriver è·¯å¾„

å¦‚æœä½ éœ€è¦ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„ ChromeDriverï¼š

```python
from mdnice import MarkdownConverter

converter = MarkdownConverter(
    chromedriver_path='/path/to/chromedriver'  # æŒ‡å®šé©±åŠ¨è·¯å¾„
)
html = converter.convert('article.md')
```

#### åœºæ™¯2ï¼šç¦»çº¿ç¯å¢ƒ

1. **åœ¨æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šé¢„ä¸‹è½½é©±åŠ¨**ï¼š
   ```bash
   python -c "from selenium import webdriver; driver = webdriver.Chrome(); driver.quit()"
   ```

2. **å¤åˆ¶ç¼“å­˜ç›®å½•åˆ°ç¦»çº¿æœºå™¨**ï¼š
   - Windows: `C:\Users\<ç”¨æˆ·å>\.cache\selenium`
   - Linux/macOS: `~/.cache/selenium`

#### åœºæ™¯3ï¼šä½¿ç”¨ webdriver-manager

è™½ç„¶ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†å¦‚æœä½ å–œæ¬¢æ›´å¤šæ§åˆ¶ï¼š

```bash
pip install webdriver-manager
```

ç„¶åå¯ä»¥åœ¨ä»£ç ä¸­ï¼š

```python
from selenium import webdriver
from webdriver_manager.chrome import ChromeDriverManager
from selenium.webdriver.chrome.service import Service

service = Service(ChromeDriverManager().install())
driver = webdriver.Chrome(service=service)
```

#### åœºæ™¯4ï¼šç½‘ç»œå—é™ç¯å¢ƒ

è®¾ç½®ä»£ç†ï¼š

```bash
export HTTP_PROXY=http://your-proxy:port
export HTTPS_PROXY=http://your-proxy:port

# ç„¶åæ­£å¸¸ä½¿ç”¨
python your_script.py
```

</details>

---

## ğŸ’¡ ä½¿ç”¨æ–‡æ¡£

### åŸºç¡€ç”¨æ³•

#### 1. è½¬æ¢å•ä¸ªæ–‡ä»¶

```python
from mdnice import to_wechat

# è½¬æ¢ Markdown æ–‡ä»¶
html = to_wechat('article.md', theme='rose')

# ä¿å­˜ä¸º HTML æ–‡ä»¶
to_wechat(
    'article.md',
    theme='rose',
    output_dir='output'  # ä¼šè‡ªåŠ¨ä¿å­˜ä¸º output/article_wechat.html
)
```

#### 2. è½¬æ¢ Markdown æ–‡æœ¬

```python
from mdnice import to_wechat

# ç›´æ¥ä¼ å…¥ Markdown å†…å®¹
markdown_text = """
# æ ‡é¢˜

è¿™æ˜¯ä¸€æ®µ **Markdown** æ–‡æœ¬ã€‚

- åˆ—è¡¨é¡¹1
- åˆ—è¡¨é¡¹2
"""

html = to_wechat(markdown_text, theme='geekBlack')
```

#### 3. ä½¿ç”¨ Path å¯¹è±¡

```python
from pathlib import Path
from mdnice import to_wechat

file_path = Path('documents/article.md')
html = to_wechat(file_path, theme='scienceBlue')
```

### æ‰¹é‡è½¬æ¢

#### 1. è½¬æ¢å¤šä¸ªæ–‡ä»¶

```python
from mdnice import to_wechat

files = [
    'article1.md',
    'article2.md',
    'article3.md'
]

# æ‰¹é‡è½¬æ¢ï¼Œæ¯ä¸ªæ–‡ä»¶éšæœºé€‰æ‹©ä¸»é¢˜
html_list = to_wechat(
    files,
    theme='random',
    output_dir='output/batch'
)

print(f"æˆåŠŸè½¬æ¢ {len(html_list)} ä¸ªæ–‡ä»¶")
```

#### 2. ä»åˆ—è¡¨ä¸­éšæœºä¸»é¢˜

```python
from mdnice import to_wechat

# ä»æŒ‡å®šä¸»é¢˜ä¸­éšæœºé€‰æ‹©
to_wechat(
    ['a.md', 'b.md', 'c.md'],
    theme=['rose', 'geekBlack', 'scienceBlue'],  # ä»è¿™3ä¸ªä¸»é¢˜ä¸­éšæœº
    output_dir='output'
)
```

### è‡ªå®šä¹‰ä¸»é¢˜

```python
from mdnice import to_wechat

# æ–¹å¼1: æŒ‡å®šå•ä¸ªä¸»é¢˜
html = to_wechat('article.md', theme='rose')

# æ–¹å¼2: å®Œå…¨éšæœº
html = to_wechat('article.md', theme='random')
# æˆ–
html = to_wechat('article.md', theme=None)

# æ–¹å¼3: ä»åˆ—è¡¨ä¸­éšæœº
html = to_wechat(
    'article.md',
    theme=['rose', 'geekBlack', 'scienceBlue']
)
```

### å¤šå¹³å°è½¬æ¢

#### ä¸€æ–‡å¤šå‘

```python
from mdnice import to_wechat, to_zhihu, to_juejin

article = 'article.md'

# è½¬æ¢ä¸ºå¾®ä¿¡å…¬ä¼—å·æ ¼å¼
to_wechat(article, theme='rose', output_dir='output/wechat')

# è½¬æ¢ä¸ºçŸ¥ä¹æ ¼å¼
to_zhihu(article, theme='geekBlack', output_dir='output/zhihu')

# è½¬æ¢ä¸ºæ˜é‡‘æ ¼å¼
to_juejin(article, theme='scienceBlue', output_dir='output/juejin')

print("âœ… å·²ç”Ÿæˆæ‰€æœ‰å¹³å°æ ¼å¼ï¼")
```

#### ä½¿ç”¨é€šç”¨å‡½æ•°

```python
from mdnice import convert

article = 'article.md'

for platform in ['wechat', 'zhihu', 'juejin']:
    convert(
        article,
        platform=platform,
        theme='rose',
        output_dir=f'output/{platform}'
    )
    print(f"âœ… {platform} æ ¼å¼è½¬æ¢å®Œæˆ")
```

### å›¾ç‰‡ä¸Šä¼  
> mdnice æ”¯æŒè‡ªåŠ¨å°†å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠï¼Œå¹¶æ›¿æ¢ä¸ºå›¾åºŠé“¾æ¥ï¼Œä»¥é€‚åº”ä¸åŒå¹³å°çš„è¦æ±‚ã€‚ä½ å¯ä»¥ç›´æ¥è°ƒç”¨ [å†…ç½®çš„å›¾åºŠä¸Šä¼ å™¨](#æ”¯æŒçš„å›¾åºŠä¸Šä¼ å™¨)ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸Šä¼ å™¨ã€‚

#### 1. ä¸Šä¼ æœ¬åœ°å›¾ç‰‡

```python
from mdnice import to_wechat
from pathlib import Path

def upload_to_imagebed(image_path: str) -> str:
    """ä¸Šä¼ æœ¬åœ°å›¾ç‰‡åˆ°å›¾åºŠ"""
    # è¯»å–å›¾ç‰‡
    with open(image_path, 'rb') as f:
        image_data = f.read()
    
    # ä¸Šä¼ åˆ°å›¾åºŠï¼ˆç¤ºä¾‹ï¼‰
    # url = upload_to_sm_ms(image_data)
    # url = upload_to_qiniu(image_data)
    
    return f"https://cdn.example.com/{Path(image_path).name}"

html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=upload_to_imagebed,
    image_upload_mode='local'  # åªä¸Šä¼ æœ¬åœ°å›¾ç‰‡ï¼ˆé»˜è®¤ï¼‰
)
```

#### 2. ä¸Šä¼ ç½‘ç»œå›¾ç‰‡

```python
import requests
from mdnice import to_wechat

def download_and_reupload(image_url: str) -> str:
    """ä¸‹è½½ç½‘ç»œå›¾ç‰‡å¹¶é‡æ–°ä¸Šä¼ """
    # ä¸‹è½½å›¾ç‰‡
    response = requests.get(image_url, timeout=10)
    image_data = response.content
    
    # ä¸Šä¼ åˆ°è‡ªå·±çš„CDN
    # new_url = upload_to_my_cdn(image_data)
    
    return f"https://my-cdn.com/images/{hash(image_url)}.jpg"

html = to_wechat(
    'article.md',
    image_uploader=download_and_reupload,
    image_upload_mode='remote'  # åªä¸Šä¼ ç½‘ç»œå›¾ç‰‡
)
```

#### 3. ä¸Šä¼ æ‰€æœ‰å›¾ç‰‡

```python
from mdnice import to_wechat

def universal_uploader(image: str) -> str:
    """é€šç”¨ä¸Šä¼ å™¨ï¼Œå¤„ç†æ‰€æœ‰ç±»å‹å›¾ç‰‡"""
    import requests
    from pathlib import Path
    
    # ç½‘ç»œå›¾ç‰‡
    if image.startswith('http'):
        response = requests.get(image, timeout=10)
        image_data = response.content
        filename = f"remote_{hash(image)}.jpg"
    # æœ¬åœ°å›¾ç‰‡
    else:
        with open(image, 'rb') as f:
            image_data = f.read()
        filename = Path(image).name
    
    # ç»Ÿä¸€ä¸Šä¼ 
    # url = upload_to_imagebed(image_data, filename)
    
    return f"https://img.example.com/{filename}"

html = to_wechat(
    'article.md',
    image_uploader=universal_uploader,
    image_upload_mode='all'  # ä¸Šä¼ æ‰€æœ‰å›¾ç‰‡
)
```

---

## ğŸ¨ ä¸»é¢˜åˆ—è¡¨

### æ‰€æœ‰å¯ç”¨ä¸»é¢˜ï¼ˆ20ç§ï¼‰

| ä¸»é¢˜ä»£ç  | ä¸­æ–‡åç§° | é£æ ¼æè¿° | é€‚ç”¨åœºæ™¯ |
|---------|---------|---------|---------|
| `normal` | é»˜è®¤ä¸»é¢˜ | ç®€æ´å¤§æ–¹ | é€šç”¨æ–‡ç«  |
| `shanchui` | å±±å¹ | æ¸©æš–é»„è‰²è°ƒ | æ¸©é¦¨å†…å®¹ |
| `rose` | è”·è–‡ç´« | ä¼˜é›…ç´«è‰²ç³» | ä¼˜è´¨æ–‡ç«  â­ |
| `fullStackBlue` | å…¨æ ˆè“ | ä¸“ä¸šè“è‰²è°ƒ | æŠ€æœ¯æ–‡ç«  |
| `nightPurple` | å‡å¤œç´« | æ·±é‚ƒç´«è‰² | æ·±åº¦åˆ†æ |
| `cuteGreen` | èŒç»¿ | æ¸…æ–°ç»¿è‰² | è½»æ¾é˜…è¯» |
| `extremeBlack` | æç®€é»‘ | é»‘ç™½æç®€ | æç®€é£æ ¼ â­|
| `orangeHeart` | æ©™å¿ƒ | æ´»åŠ›æ©™è‰² | çƒ­æƒ…æ´‹æº¢ |
| `ink` | å¢¨é»‘ | ä¸­å›½é£å¢¨è‰² | ä¼ ç»Ÿæ–‡åŒ– |
| `purple` | å§¹ç´« | é²œè‰³ç´«è‰² | åˆ›æ„å†…å®¹ |
| `green` | ç»¿æ„ | è‡ªç„¶ç»¿è‰² | ç”Ÿæ´»åˆ†äº« |
| `cyan` | å«©é’ | æ¸…çˆ½é’è‰² | æ¸…æ–°æ–‡å­— |
| `wechatFormat` | WeChat-Format | å¾®ä¿¡å®˜æ–¹é£æ ¼ | å…¬ä¼—å·æ–‡ç«  |
| `blueCyan` | å…°é’ | è“é’è‰²è°ƒ | æ–‡è‰ºèŒƒå„¿ |
| `blueMountain` | å‰ç«¯ä¹‹å·…åŒæ¬¾ | å‰ç«¯ä¹‹å·…é£æ ¼ | æŠ€æœ¯åˆ†äº«  |
| `geekBlack` | æå®¢é»‘ | ç¨‹åºå‘˜æœ€çˆ± | æŠ€æœ¯åšå®¢ |
| `red` | çº¢ç»¯ | çƒ­æƒ…çº¢è‰² | é‡è¦é€šçŸ¥ |
| `blue` | è“è¹ | æ¸…æ¾ˆè“è‰² | ä¸“ä¸šå†…å®¹ |
| `scienceBlue` | ç§‘æŠ€è“ | ç§‘æŠ€æ„Ÿè“è‰² | ç§‘æŠ€æ–‡ç«  |
| `simple` | ç®€ | æç®€ä¸»ä¹‰ | ç®€çº¦é£æ ¼ |

### ä¸»é¢˜é¢„è§ˆ

```python
from mdnice import MarkdownConverter

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ä¸»é¢˜
print("å¯ç”¨ä¸»é¢˜ï¼š", MarkdownConverter.AVAILABLE_THEMES)
print("ä¸»é¢˜åç§°ï¼š", MarkdownConverter.THEME_NAMES)
```

---

## ğŸ“š API å‚è€ƒ

### å¹³å°ä¸“ç”¨å‡½æ•°

#### `to_wechat()` - å¾®ä¿¡å…¬ä¼—å·

```python
def to_wechat(
    markdown: Union[str, Path, List[Union[str, Path]]],
    theme: Union[str, List[str], None] = 'normal',
    output_dir: Optional[Union[str, Path]] = None,
    return_html: bool = True,
    headless: bool = True,
    wrap_full_html: bool = False,
    retry_count: int = 1,
    on_error: Optional[Callable[[str, Dict[str, Any]], None]] = None,
    editor_url: Optional[str] = None,
    image_uploader: Optional[Callable[[str], str]] = None,
    image_upload_mode: ImageUploadMode = 'local'
) -> Union[str, List[str], Path, List[Path]]
```

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `markdown` | `str/Path/List` | **å¿…éœ€** | Markdown å†…å®¹æˆ–æ–‡ä»¶è·¯å¾„ |
| `theme` | `str/List/None` | `'normal'` | ä¸»é¢˜åç§°ã€åˆ—è¡¨æˆ– Noneï¼ˆéšæœºï¼‰ |
| `output_dir` | `str/Path/None` | `None` | è¾“å‡ºç›®å½• |
| `return_html` | `bool` | `True` | æ˜¯å¦è¿”å› HTML å†…å®¹ |
| `headless` | `bool` | `True` | æ˜¯å¦ä½¿ç”¨æ— å¤´æ¨¡å¼ |
| `wrap_full_html` | `bool` | `False` | æ˜¯å¦åŒ…è£…ä¸ºå®Œæ•´ HTML æ–‡æ¡£ |
| `retry_count` | `int` | `1` | å¤±è´¥é‡è¯•æ¬¡æ•° |
| `on_error` | `Callable/None` | `None` | é”™è¯¯é€šçŸ¥å›è°ƒå‡½æ•° |
| `editor_url` | `str/None` | `None` | è‡ªå®šä¹‰ç¼–è¾‘å™¨ç½‘å€ |
| `image_uploader` | `Callable/None` | `None` | å›¾ç‰‡ä¸Šä¼ å›è°ƒå‡½æ•°  |
| `image_upload_mode` | `str` | `'local'` | å›¾ç‰‡ä¸Šä¼ æ¨¡å¼  |

**å›¾ç‰‡ä¸Šä¼ æ¨¡å¼ï¼š**

- `'local'`: åªä¸Šä¼ æœ¬åœ°å›¾ç‰‡ï¼ˆé»˜è®¤ï¼‰
- `'remote'`: åªä¸Šä¼ ç½‘ç»œå›¾ç‰‡
- `'all'`: ä¸Šä¼ æ‰€æœ‰å›¾ç‰‡ï¼ˆæœ¬åœ°+ç½‘ç»œ+DataURLï¼‰

**ç¤ºä¾‹ï¼š**

```python
from mdnice import to_wechat

# åŸºç¡€ç”¨æ³•
html = to_wechat('article.md')

# å®Œæ•´å‚æ•°
html = to_wechat(
    markdown='article.md',
    theme='rose',
    output_dir='output',
    return_html=True,
    headless=True,
    wrap_full_html=False,
    retry_count=2,
    editor_url=None,
    image_uploader=my_uploader,
    image_upload_mode='local'
)
```

#### `to_zhihu()` å’Œ `to_juejin()`

å‚æ•°ä¸ `to_wechat()` å®Œå…¨ç›¸åŒã€‚

### é€šç”¨è½¬æ¢å‡½æ•°

#### `convert()` - é€šç”¨è½¬æ¢

```python
def convert(
    markdown: Union[str, Path, List[Union[str, Path]]],
    platform: Platform = 'wechat',
    theme: Union[str, List[str], None] = 'normal',
    output_dir: Optional[Union[str, Path]] = None,
    return_html: bool = True,
    headless: bool = True,
    wrap_full_html: bool = False,
    retry_count: int = 1,
    on_error: Optional[Callable[[str, Dict[str, Any]], None]] = None,
    editor_url: Optional[str] = None,
    image_uploader: Optional[Callable[[str], str]] = None,
    image_upload_mode: ImageUploadMode = 'local'
) -> Union[str, List[str], Path, List[Path]]
```

**é¢å¤–å‚æ•°ï¼š**

- `platform`: ç›®æ ‡å¹³å°ï¼ˆ'wechat', 'zhihu', 'juejin'ï¼‰

### æ ¸å¿ƒç±»

#### `MarkdownConverter` - è½¬æ¢å™¨ç±»

```python
class MarkdownConverter:
    def __init__(
        self,
        headless: bool = True,
        wait_timeout: int = 30,
        retry_count: int = 1,
        on_error: Optional[Callable[[str, Dict[str, Any]], None]] = None,
        editor_url: Optional[str] = None,
        image_uploader: Optional[Callable[[str], str]] = None,
        image_upload_mode: ImageUploadMode = 'local',
        chromedriver_path: Optional[str] = None  # 
    )
```

**ç±»å±æ€§ï¼š**

- `AVAILABLE_THEMES`: æ‰€æœ‰å¯ç”¨ä¸»é¢˜åˆ—è¡¨ï¼ˆ20ä¸ªï¼‰
- `THEME_NAMES`: ä¸»é¢˜ä¸­æ–‡åç§°å­—å…¸
- `PLATFORM_CONFIG`: å¹³å°é…ç½®ä¿¡æ¯

**æ–°å¢å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `chromedriver_path` | `str/None` | `None` | è‡ªå®šä¹‰ ChromeDriver è·¯å¾„ï¼ˆå¯é€‰ï¼‰ |

**ç¤ºä¾‹ï¼š**

```python
from mdnice import MarkdownConverter

# åŸºç¡€ç”¨æ³•ï¼ˆè‡ªåŠ¨ç®¡ç†é©±åŠ¨ï¼‰
converter = MarkdownConverter(
    headless=False,
    wait_timeout=60,
    retry_count=2
)

# é«˜çº§ç”¨æ³•ï¼ˆè‡ªå®šä¹‰é©±åŠ¨è·¯å¾„ï¼‰
converter = MarkdownConverter(
    headless=False,
    chromedriver_path='/path/to/chromedriver'  # ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬é©±åŠ¨
)

# æ‰§è¡Œè½¬æ¢
html = converter.convert(
    markdown='article.md',
    theme='rose',
    platform='wechat'
)
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

### å®Œæ•´å‚æ•°åˆ—è¡¨

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `markdown` | `str/Path/List` | **å¿…éœ€** | Markdown å†…å®¹æˆ–æ–‡ä»¶è·¯å¾„ |
| `platform` | `str` | `'wechat'` | ç›®æ ‡å¹³å° |
| `theme` | `str/List/None` | `'normal'` | ä¸»é¢˜åç§°ã€åˆ—è¡¨æˆ– None |
| `output_dir` | `str/Path/None` | `None` | è¾“å‡ºç›®å½• |
| `return_html` | `bool` | `True` | æ˜¯å¦è¿”å› HTML å†…å®¹ |
| `headless` | `bool` | `True` | æ˜¯å¦ä½¿ç”¨æ— å¤´æ¨¡å¼ |
| `wrap_full_html` | `bool` | `False` | æ˜¯å¦åŒ…è£…ä¸ºå®Œæ•´ HTML |
| `retry_count` | `int` | `1` | å¤±è´¥é‡è¯•æ¬¡æ•° |
| `wait_timeout` | `int` | `30` | é¡µé¢åŠ è½½è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ |
| `on_error` | `Callable/None` | `None` | é”™è¯¯å›è°ƒå‡½æ•° |
| `editor_url` | `str/None` | `None` | è‡ªå®šä¹‰ç¼–è¾‘å™¨ç½‘å€ |
| `image_uploader` | `Callable/None` | `None` | å›¾ç‰‡ä¸Šä¼ å›è°ƒå‡½æ•°  |
| `image_upload_mode` | `str` | `'local'` | å›¾ç‰‡ä¸Šä¼ æ¨¡å¼  |
| `chromedriver_path` | `str/None` | `None` | è‡ªå®šä¹‰ ChromeDriver è·¯å¾„  |

### å›¾ç‰‡ä¸Šä¼ æ¨¡å¼è¯¦è§£ 

| æ¨¡å¼ | å€¼ | è¡Œä¸º |
|------|-----|------|
| ä»…æœ¬åœ° | `'local'` | åªä¸Šä¼ æœ¬åœ°è·¯å¾„çš„å›¾ç‰‡ï¼Œç½‘ç»œå›¾ç‰‡ä¿æŒä¸å˜ï¼ˆé»˜è®¤ï¼‰ |
| ä»…ç½‘ç»œ | `'remote'` | åªä¸Šä¼ ç½‘ç»œURLå›¾ç‰‡ï¼Œæœ¬åœ°å›¾ç‰‡ä¿æŒä¸å˜ |
| å…¨éƒ¨ | `'all'` | ä¸Šä¼ æ‰€æœ‰å›¾ç‰‡ï¼ˆæœ¬åœ°+ç½‘ç»œ+DataURLï¼‰ |

---

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. è‡ªå®šä¹‰ç¼–è¾‘å™¨åœ°å€

```python
from mdnice import to_wechat

# ä½¿ç”¨è‡ªå®šä¹‰ç¼–è¾‘å™¨
html = to_wechat(
    'article.md',
    editor_url='https://your-domain.com/markdown-nice/'
)
```

**æ™ºèƒ½å®¹é”™æœºåˆ¶ï¼š**
1. è‡ªå®šä¹‰åœ°å€ (`editor_url`)
2. é»˜è®¤åœ°å€ (`https://xiaoqiangclub.github.io/md/`)
3. å¤‡ç”¨åœ°å€ (`https://whaoa.github.io/markdown-nice/`)

### 2. è‡ªå®šä¹‰ ChromeDriver è·¯å¾„ 

é€‚ç”¨äºéœ€è¦ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬é©±åŠ¨çš„åœºæ™¯ï¼š

```python
from mdnice import MarkdownConverter

# æ–¹å¼1ï¼šä½¿ç”¨è½¬æ¢å™¨ç±»
converter = MarkdownConverter(
    chromedriver_path='/path/to/chromedriver'
)
html = converter.convert('article.md')

# æ–¹å¼2ï¼šæŸ¥çœ‹é©±åŠ¨ç¼“å­˜ä½ç½®
import platform
from pathlib import Path

if platform.system() == 'Windows':
    cache_dir = Path.home() / '.cache' / 'selenium'
elif platform.system() == 'Darwin':
    cache_dir = Path.home() / 'Library' / 'Caches' / 'selenium'
else:
    cache_dir = Path.home() / '.cache' / 'selenium'

print(f"ChromeDriver ç¼“å­˜ä½ç½®: {cache_dir}")
```

### 3. é”™è¯¯é€šçŸ¥å›è°ƒ

```python
from mdnice import to_wechat

def error_handler(error_msg: str, context: dict):
    """è‡ªå®šä¹‰é”™è¯¯å¤„ç†"""
    print(f"âŒ é”™è¯¯ï¼š{error_msg}")
    print(f"ğŸ“ é˜¶æ®µï¼š{context.get('stage')}")
    # å‘é€é€šçŸ¥...

html = to_wechat(
    'article.md',
    on_error=error_handler,
    retry_count=2
)
```

### 4. æ‰¹é‡å¤„ç†ä¸åŒå¹³å°

```python
from mdnice import convert

files = ['article1.md', 'article2.md', 'article3.md']
platforms = ['wechat', 'zhihu', 'juejin']

for platform in platforms:
    convert(
        files,
        platform=platform,
        theme='rose',
        output_dir=f'output/{platform}',
        retry_count=2
    )
```

### 5. å›¾ç‰‡ä¸Šä¼ é«˜çº§ç”¨æ³• 

```python
from mdnice import to_wechat
import requests

class ImageUploader:
    """å›¾ç‰‡ä¸Šä¼ å™¨ç±»"""
    
    def __init__(self, api_token: str):
        self.api_token = api_token
        self.uploaded_count = 0
    
    def upload(self, image: str) -> str:
        """ä¸Šä¼ å›¾ç‰‡"""
        # å¤„ç†ç½‘ç»œå›¾ç‰‡
        if image.startswith('http'):
            response = requests.get(image)
            data = response.content
        else:
            # å¤„ç†æœ¬åœ°å›¾ç‰‡
            with open(image, 'rb') as f:
                data = f.read()
        
        # ä¸Šä¼ åˆ°å›¾åºŠ
        url = self._upload_to_cdn(data)
        self.uploaded_count += 1
        return url
    
    def _upload_to_cdn(self, data: bytes) -> str:
        """å®é™…ä¸Šä¼ é€»è¾‘"""
        # ... ä½ çš„CDNä¸Šä¼ ä»£ç  ...
        return "https://cdn.com/image.jpg"

# ä½¿ç”¨
uploader = ImageUploader(api_token='YOUR_TOKEN')
html = to_wechat(
    'article.md',
    image_uploader=uploader.upload,
    image_upload_mode='all'
)
print(f"ä¸Šä¼ äº† {uploader.uploaded_count} å¼ å›¾ç‰‡")
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: é¦–æ¬¡è¿è¡Œå¾ˆæ…¢ï¼Ÿ

**A:** è¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚Selenium Manager é¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ ChromeDriverï¼ˆçº¦å‡ ç§’åˆ°å‡ åç§’ï¼Œå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰ã€‚ä¸‹è½½å®Œæˆåä¼šç¼“å­˜åˆ°æœ¬åœ°ï¼Œåç»­è¿è¡Œä¼šå¾ˆå¿«ã€‚

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼æ—¥å¿—ï¼š

```
INFO: Selenium Manager: driver found in cache
```

### Q2: ChromeDriver ä¸‹è½½å¤±è´¥ï¼Ÿ

**A:** å¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š

#### æ–¹æ¡ˆ1ï¼šæ£€æŸ¥ç½‘ç»œ

```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
ping google.com
```

#### æ–¹æ¡ˆ2ï¼šä½¿ç”¨ä»£ç†

```bash
# Linux/macOS
export HTTP_PROXY=http://your-proxy:port
export HTTPS_PROXY=http://your-proxy:port

# Windows (PowerShell)
$env:HTTP_PROXY="http://your-proxy:port"
$env:HTTPS_PROXY="http://your-proxy:port"
```

#### æ–¹æ¡ˆ3ï¼šæ‰‹åŠ¨ä¸‹è½½é©±åŠ¨

```python
from mdnice import MarkdownConverter

# ä¸‹è½½é©±åŠ¨ï¼šhttps://chromedriver.chromium.org/
# ç„¶åæŒ‡å®šè·¯å¾„
converter = MarkdownConverter(
    chromedriver_path='/path/to/chromedriver'
)
html = converter.convert('article.md')
```

#### æ–¹æ¡ˆ4ï¼šä½¿ç”¨ webdriver-manager

```bash
pip install webdriver-manager
```

ç„¶åå®ƒä¼šå¸®ä½ å¤„ç†ä¸‹è½½ã€‚

### Q3: å¦‚ä½•æŸ¥çœ‹ ChromeDriver ç¼“å­˜ä½ç½®ï¼Ÿ

**A:** Selenium Manager çš„ç¼“å­˜ä½ç½®ï¼š

```python
import platform
from pathlib import Path

if platform.system() == 'Windows':
    cache = Path.home() / '.cache' / 'selenium'
elif platform.system() == 'Darwin':
    cache = Path.home() / 'Library' / 'Caches' / 'selenium'
else:
    cache = Path.home() / '.cache' / 'selenium'

print(f"ç¼“å­˜ä½ç½®: {cache}")
```

### Q4: ç¦»çº¿ç¯å¢ƒå¦‚ä½•ä½¿ç”¨ï¼Ÿ

**A:** å¯¹äºæ— æ³•è”ç½‘çš„ç¯å¢ƒï¼š

1. **åœ¨æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šé¢„ä¸‹è½½**ï¼š
   ```bash
   python -c "from selenium import webdriver; driver = webdriver.Chrome(); driver.quit()"
   ```

2. **å¤åˆ¶ç¼“å­˜ç›®å½•åˆ°ç›®æ ‡æœºå™¨**ï¼š
   - Windows: `C:\Users\<ç”¨æˆ·å>\.cache\selenium`
   - Linux: `~/.cache/selenium`
   - macOS: `~/Library/Caches/selenium`

3. **æˆ–æ‰‹åŠ¨æŒ‡å®šé©±åŠ¨è·¯å¾„**ï¼š
   ```python
   converter = MarkdownConverter(
       chromedriver_path='/path/to/chromedriver'
   )
   ```

### Q5: æ¸…é™¤é©±åŠ¨ç¼“å­˜

**A:** å¦‚æœé‡åˆ°ç‰ˆæœ¬ä¸åŒ¹é…é—®é¢˜ï¼š

```python
import shutil
from pathlib import Path

cache_dir = Path.home() / '.cache' / 'selenium'
if cache_dir.exists():
    shutil.rmtree(cache_dir)
    print("âœ… ç¼“å­˜å·²æ¸…é™¤ï¼Œé‡æ–°è¿è¡Œå°†è‡ªåŠ¨ä¸‹è½½åŒ¹é…ç‰ˆæœ¬")
```

### Q6: å›¾ç‰‡ä¸Šä¼ å¤±è´¥æ€ä¹ˆå¤„ç†ï¼Ÿ

**A:** å›¾ç‰‡ä¸Šä¼ å¤±è´¥ä¸ä¼šå½±å“æ•´ä½“è½¬æ¢ï¼Œå¤±è´¥çš„å›¾ç‰‡ä¼šä¿æŒåŸæ ·ã€‚å»ºè®®ï¼š

1. æ£€æŸ¥ä¸Šä¼ å‡½æ•°æ˜¯å¦æ­£ç¡®
2. éªŒè¯å›¾åºŠAPIæ˜¯å¦å¯ç”¨
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
4. ä½¿ç”¨ `on_error` å›è°ƒè·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

```python
def safe_uploader(image: str) -> str:
    try:
        # ä¸Šä¼ é€»è¾‘
        return upload(image)
    except Exception as e:
        print(f"ä¸Šä¼ å¤±è´¥: {e}")
        return image  # å¤±è´¥åˆ™è¿”å›åŸè·¯å¾„
```

### Q7: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ

**A:** æ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š

- `.jpg`, `.jpeg`
- `.png`
- `.gif`
- `.bmp`
- `.webp`
- `.svg`

### Q8: Windows ä¸‹è·¯å¾„é—®é¢˜ï¼Ÿ

**A:** ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²æˆ– Path å¯¹è±¡ï¼š

```python
# æ–¹å¼1: åŸå§‹å­—ç¬¦ä¸²
html = to_wechat(r'D:\Documents\article.md')

# æ–¹å¼2: æ­£æ–œæ 
html = to_wechat('D:/Documents/article.md')

# æ–¹å¼3: Path å¯¹è±¡ï¼ˆæ¨èï¼‰
from pathlib import Path
html = to_wechat(Path('D:/Documents/article.md'))
```

### Q9: å¦‚ä½•éƒ¨ç½²è‡ªå·±çš„ç¼–è¾‘å™¨ï¼Ÿ

**A:** å‚è€ƒ [markdown-nice éƒ¨ç½²æ–‡æ¡£](https://github.com/whaoa/markdown-nice)ï¼š

```bash
git clone https://github.com/whaoa/markdown-nice.git
cd markdown-nice
npm install
npm run build
# éƒ¨ç½² build ç›®å½•åˆ°ä½ çš„æœåŠ¡å™¨
```

### Q10: æ”¯æŒå“ªäº› Markdown è¯­æ³•ï¼Ÿ

**A:** æ”¯æŒæ‰€æœ‰æ ‡å‡† Markdown åŠæ‰©å±•è¯­æ³•ï¼š

- âœ… æ ‡é¢˜ï¼ˆH1-H6ï¼‰
- âœ… **ç²—ä½“**ã€*æ–œä½“*ã€~~åˆ é™¤çº¿~~
- âœ… åˆ—è¡¨ï¼ˆæœ‰åºã€æ— åºã€ä»»åŠ¡åˆ—è¡¨ï¼‰
- âœ… ä»£ç å—ï¼ˆæ”¯æŒè¯­æ³•é«˜äº®ï¼‰
- âœ… å¼•ç”¨ã€è¡¨æ ¼
- âœ… å›¾ç‰‡ã€é“¾æ¥
- âœ… æ•°å­¦å…¬å¼ï¼ˆLaTeXï¼‰
- âœ… è„šæ³¨ã€ç›®å½•

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.0.1 (2025-11-18)

**ğŸ‰ é¦–æ¬¡å‘å¸ƒ**

#### æ–°å¢

- âœ¨ æ”¯æŒå¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ã€ç¨€åœŸæ˜é‡‘ä¸‰å¤§å¹³å°
- âœ¨ å†…ç½®20ç§ç²¾ç¾ä¸»é¢˜
- âœ¨ æ‰¹é‡è½¬æ¢åŠŸèƒ½
- âœ¨ æ™ºèƒ½é‡è¯•æœºåˆ¶
- âœ¨ é”™è¯¯é€šçŸ¥å›è°ƒ
- âœ¨ è‡ªå®šä¹‰ç¼–è¾‘å™¨åœ°å€æ”¯æŒ
- âœ¨ æ™ºèƒ½åœ°å€åˆ‡æ¢æœºåˆ¶ï¼ˆè‡ªå®šä¹‰â†’é»˜è®¤â†’å¤‡ç”¨ï¼‰
- âœ¨ **å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ åŠŸèƒ½** 
  - æ”¯æŒæœ¬åœ°å›¾ç‰‡ä¸Šä¼ 
  - æ”¯æŒç½‘ç»œå›¾ç‰‡é‡æ–°ä¸Šä¼ 
  - æ”¯æŒ3ç§ä¸Šä¼ æ¨¡å¼ï¼ˆlocal/remote/allï¼‰
  - è‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ç±»å‹ï¼ˆæœ¬åœ°/ç½‘ç»œ/DataURLï¼‰
- âœ¨ **é›¶é…ç½®é©±åŠ¨ç®¡ç†** 
  - Selenium 4.6+ è‡ªåŠ¨ä¸‹è½½å’Œç®¡ç† ChromeDriver
  - æ”¯æŒè‡ªå®šä¹‰é©±åŠ¨è·¯å¾„ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰
  - å‹å¥½çš„é”™è¯¯æç¤ºå’Œæ•…éšœæ’æŸ¥
- âœ¨ å¹³å°ä¸“ç”¨å‡½æ•°ï¼š`to_wechat()`, `to_zhihu()`, `to_juejin()`
- ğŸ“ å®Œæ•´çš„ç±»å‹æ³¨è§£
- ğŸ“ ä¸­æ–‡æ–‡æ¡£å’Œæ—¥å¿—

#### ç‰¹æ€§

- ğŸ¨ 20ç§ä¸»é¢˜éšæ„åˆ‡æ¢
- ğŸ”„ è‡ªåŠ¨å®¹é”™å’Œé™çº§
- ğŸ“¤ çµæ´»çš„å›¾ç‰‡ä¸Šä¼ ç­–ç•¥
- ğŸŒ å¤šç¼–è¾‘å™¨åœ°å€æ”¯æŒ
- ğŸ“¦ æ‰¹é‡å¤„ç†èƒ½åŠ›
- âš™ï¸ é«˜åº¦å¯é…ç½®
- ğŸš€ å¼€ç®±å³ç”¨ï¼Œé›¶é…ç½®

#### æŠ€æœ¯æ ˆ

- Python 3.8+
- Selenium 4.6+ï¼ˆè‡ªåŠ¨é©±åŠ¨ç®¡ç†ï¼‰
- Type Hintsï¼ˆå®Œæ•´ç±»å‹æ³¨è§£ï¼‰
- Poetryï¼ˆä¾èµ–ç®¡ç†ï¼‰



---

## ğŸ’– æ‰“èµæ”¯æŒ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿æ‰“èµæ”¯æŒï¼ä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­æ›´æ–°çš„åŠ¨åŠ› ğŸ’ª

<div align="center">

![æ‰“èµæ”¯æŒ](https://s2.loli.net/2025/11/10/lQRcAvN3Lgxukqb.png)

**æ‰«ç æ‰“èµ | æ”¯æŒä½œè€… | æŒç»­æ›´æ–°**

</div>

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [markdown-nice](https://github.com/whaoa/markdown-nice) - ä¼˜ç§€çš„ Markdown ç¼–è¾‘å™¨
- [Selenium](https://www.selenium.dev/) - å¼ºå¤§çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–æ¡†æ¶ï¼ˆ4.6+ è‡ªåŠ¨é©±åŠ¨ç®¡ç†ï¼‰
- [Poetry](https://python-poetry.org/) - ç°ä»£åŒ–çš„ Python ä¾èµ–ç®¡ç†å·¥å…·

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨è€…çš„æ”¯æŒï¼â­

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

<!-- 
---

## â­ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Star â­ï¸

[![Star History Chart](https://api.star-history.com/svg?repos=xiaoqiangclub/mdnice&type=Date)](https://star-history.com/#xiaoqiangclub/mdnice&Date)

---

<div align="center">

**Made with â¤ï¸ by [xiaoqiang](https://github.com/xiaoqiangclub)**

**æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šXiaoqiangClub**

[â¬† å›åˆ°é¡¶éƒ¨](#-mdnice)

</div>
 -->