<div align="center">

![mdnice](https://s2.loli.net/2025/11/18/xzuPwHCoDiET5r6.jpg)

[![PyPI version](https://img.shields.io/badge/PyPI-0.0.3-blue)](https://pypi.org/project/mdnice) [![Python Version](https://img.shields.io/badge/Python-3.10%2B-blue.svg)](https://pypi.org/project/mdnice/) [![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](LICENSE) 

</div>

## ğŸ“– ç›®å½•

- [âœ¨ åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ“¦ å®‰è£…](#-å®‰è£…)
- [ğŸ’¡ ä½¿ç”¨æ–‡æ¡£](#-ä½¿ç”¨æ–‡æ¡£)
- [ğŸ¨ ä¸»é¢˜åˆ—è¡¨](#-ä¸»é¢˜åˆ—è¡¨)
- [ğŸ“¤ å›¾ç‰‡ä¸Šä¼ ](#-å›¾ç‰‡ä¸Šä¼ )
- [ğŸŒ è¿œç¨‹æµè§ˆå™¨](#-è¿œç¨‹æµè§ˆå™¨)
- [ğŸ“š API å‚è€ƒ](#-api-å‚è€ƒ)
- [ğŸ”§ é«˜çº§ç”¨æ³•](#-é«˜çº§ç”¨æ³•)
- [â“ å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [ğŸ“ æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)
- [ğŸ’– æ‰“èµæ”¯æŒ](#-æ‰“èµæ”¯æŒ)
- [ğŸ“„ è®¸å¯è¯](#-è®¸å¯è¯)

---

# ğŸ“ mdnice

> å°† Markdown è½¬æ¢ä¸ºå¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ã€ç¨€åœŸæ˜é‡‘æ”¯æŒçš„å¯Œæ–‡æœ¬æ ¼å¼

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- âœ… **å¤šå¹³å°æ”¯æŒ** - ä¸€é”®è½¬æ¢ä¸ºå¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ã€ç¨€åœŸæ˜é‡‘æ ¼å¼
- âœ… **20+ ç²¾ç¾ä¸»é¢˜** - å†…ç½® 20 ç§ç²¾å¿ƒè®¾è®¡çš„æ–‡ç« ä¸»é¢˜
- âœ… **7 ç§ä»£ç ä¸»é¢˜** - æ”¯æŒå¤šç§ä»£ç é«˜äº®ä¸»é¢˜ï¼ˆMonokaiã€GitHubã€VS2015 ç­‰ï¼‰
- âœ… **Mac é£æ ¼ä»£ç å—** - å¯é€‰çš„ macOS é£æ ¼ä»£ç è£…é¥°
- âœ… **æ‰¹é‡å¤„ç†** - æ”¯æŒæ‰¹é‡è½¬æ¢å¤šä¸ª Markdown æ–‡ä»¶
- âœ… **æ™ºèƒ½é‡è¯•** - ç½‘ç»œæ•…éšœè‡ªåŠ¨é‡è¯•æœºåˆ¶
- âœ… **å®Œæ•´æ ·å¼** - ä¿ç•™æ‰€æœ‰å†…è”æ ·å¼ï¼Œæ ¼å¼å®Œç¾è¿˜åŸ
- âœ… **HTML æ¸…ç†** - è‡ªåŠ¨ç§»é™¤ç¼–è¾‘å™¨æ ‡è®°ï¼Œä»£ç æ›´ç®€æ´
- âœ… **é›¶é…ç½®** - Playwright å†…ç½®æµè§ˆå™¨é©±åŠ¨ï¼Œå¼€ç®±å³ç”¨

### ğŸŒ è¿œç¨‹æµè§ˆå™¨æ”¯æŒ

- ğŸ³ **Docker å®¹å™¨ç¯å¢ƒ** - æ— éœ€åœ¨å®¹å™¨ä¸­å®‰è£…æµè§ˆå™¨
- â˜ï¸ **äº‘å‡½æ•°/æ— æœåŠ¡å™¨** - å®Œç¾é€‚é… AWS Lambdaã€é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ç­‰
- ğŸ”„ **å…±äº«æµè§ˆå™¨æœåŠ¡** - å¤šå®ä¾‹å…±äº«ï¼ŒèŠ‚çœèµ„æº
- ğŸ’» **èµ„æºå—é™ç¯å¢ƒ** - å‡å°‘æœ¬åœ°èµ„æºæ¶ˆè€—
- ğŸ”Œ **çµæ´»éƒ¨ç½²** - æ”¯æŒ browserless å’Œ Playwright å®˜æ–¹è¿œç¨‹æµè§ˆå™¨

### ğŸ“¤ å›¾ç‰‡ä¸Šä¼ 

- ğŸ–¼ï¸ **æ™ºèƒ½è¯†åˆ«** - è‡ªåŠ¨è¯†åˆ«æœ¬åœ°å›¾ç‰‡ã€ç½‘ç»œå›¾ç‰‡ã€Data URL
- ğŸ¯ **çµæ´»æ¨¡å¼** - æ”¯æŒ 3 ç§ä¸Šä¼ æ¨¡å¼ï¼ˆä»…æœ¬åœ°/ä»…ç½‘ç»œ/å…¨éƒ¨ï¼‰
- ğŸ”Œ **æ˜“äºé›†æˆ** - ç®€å•å›è°ƒå‡½æ•°å³å¯å¯¹æ¥ä»»ä½•å›¾åºŠ
- âš¡ **é«˜æ•ˆå¤„ç†** - æ‰¹é‡ä¸Šä¼ ï¼Œé”™è¯¯å®¹é”™
- ğŸŒ **å¤šå›¾åºŠæ”¯æŒ** - å†…ç½® 9 ç§ä¸»æµå›¾åºŠä¸Šä¼ å™¨

#### æ”¯æŒçš„å›¾åºŠ

| å›¾åºŠåç§° | å…è´¹é¢åº¦ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|---------|------|---------|
| SM.MS | 5MB/æ–‡ä»¶ | å›½å†…è®¿é—®å¿« | ä¸´æ—¶ä¸Šä¼  |
| å¾®ä¿¡å…¬ä¼—å· | - | å®˜æ–¹ç¨³å®š | å…¬ä¼—å·æ–‡ç«  â­ |
| ä¸ƒç‰›äº‘ | 10GB å­˜å‚¨ | ç¨³å®šå¯é  | é•¿æœŸå­˜å‚¨ |
| é˜¿é‡Œäº‘ OSS | 40GB(6ä¸ªæœˆ) | ä¼ä¸šçº§ | ç”Ÿäº§ç¯å¢ƒ |
| GitHub | æ— é™ | å®Œå…¨å…è´¹ | æŠ€æœ¯åšå®¢ |
| æœ¬åœ°å­˜å‚¨ | - | æ— ç½‘ç»œä¾èµ– | æœ¬åœ°é¢„è§ˆ |

### ğŸ“Š æ”¯æŒå¹³å°

| å¹³å° | å‡½æ•° | è¯´æ˜ |
|------|------|------|
| ğŸ“± å¾®ä¿¡å…¬ä¼—å· | `to_wechat()` | å®Œç¾é€‚é…å…¬ä¼—å·ç¼–è¾‘å™¨ |
| ğŸ“˜ çŸ¥ä¹ | `to_zhihu()` | é€‚é…çŸ¥ä¹æ–‡ç« ç¼–è¾‘å™¨ |
| ğŸ’ ç¨€åœŸæ˜é‡‘ | `to_juejin()` | é€‚é…æ˜é‡‘æ–‡ç« ç¼–è¾‘å™¨ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•çš„ä½¿ç”¨

```python
from mdnice import to_wechat

# ä¸€è¡Œä»£ç å®Œæˆè½¬æ¢
html = to_wechat('article.md')
print(f"è½¬æ¢æˆåŠŸï¼HTMLé•¿åº¦ï¼š{len(html)}")
```

> ğŸ’¡ **é¦–æ¬¡è¿è¡Œæç¤º**ï¼šéœ€è¦å…ˆå®‰è£… Playwright æµè§ˆå™¨ï¼ˆä»…ä¸€æ¬¡ï¼‰

### 5 åˆ†é’Ÿä¸Šæ‰‹

```python
from mdnice import to_wechat, to_zhihu, to_juejin

# ç¤ºä¾‹ 1: å¾®ä¿¡å…¬ä¼—å·æ ¼å¼ï¼ˆå¸¦ä»£ç ä¸»é¢˜ï¼‰
html = to_wechat(
    'article.md',
    theme='rose',              # æ–‡ç« ä¸»é¢˜
    code_theme='monokai',      # ä»£ç ä¸»é¢˜
    mac_style=True,            # Mac é£æ ¼ä»£ç å—
    output_dir='output/wechat'
)

# ç¤ºä¾‹ 2: çŸ¥ä¹æ ¼å¼
html = to_zhihu(
    'article.md',
    theme='geekBlack',
    code_theme='github',
    mac_style=False,
    output_dir='output/zhihu'
)

# ç¤ºä¾‹ 3: æ‰¹é‡è½¬æ¢
to_wechat(
    ['article1.md', 'article2.md', 'article3.md'],
    theme='random',            # éšæœºä¸»é¢˜
    output_dir='output/batch'
)
```

---

## ğŸ“¦ å®‰è£…

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.10+
- **æµè§ˆå™¨**: è‡ªåŠ¨å®‰è£…ï¼ˆPlaywright å†…ç½®ï¼‰
- **é©±åŠ¨**: æ— éœ€æ‰‹åŠ¨å®‰è£… âœ¨

### å®‰è£…æ­¥éª¤

#### 1. å®‰è£… mdnice

```bash
pip install mdnice
```

#### 2. å®‰è£… Playwright æµè§ˆå™¨ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰

```bash
playwright install chromium
```

**å°±è¿™ä¹ˆç®€å•ï¼** ğŸ‰ å®‰è£…å®Œæˆåå³å¯ä½¿ç”¨ã€‚

> ğŸ’¡ **æç¤º**ï¼š`playwright install chromium` åªéœ€è¿è¡Œä¸€æ¬¡ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½çº¦ 200MB çš„ Chromium æµè§ˆå™¨ã€‚

#### å…¶ä»–å®‰è£…æ–¹å¼

```bash
# ä½¿ç”¨ poetry
poetry add mdnice
poetry run playwright install chromium

# ä»æºç å®‰è£…
git clone https://github.com/xiaoqiangclub/mdnice.git
cd mdnice
pip install -e .
playwright install chromium
```

### éªŒè¯å®‰è£…

```python
from mdnice import to_wechat, __version__

# æŸ¥çœ‹ç‰ˆæœ¬
print(f"mdnice ç‰ˆæœ¬: {__version__}")

# æµ‹è¯•è½¬æ¢
html = to_wechat("# æµ‹è¯•\n\nè¿™æ˜¯æµ‹è¯•å†…å®¹ã€‚")
print("âœ… å®‰è£…æˆåŠŸï¼" if html else "âŒ å®‰è£…å¤±è´¥")
```

---

## ğŸ’¡ ä½¿ç”¨æ–‡æ¡£

### åŸºç¡€ç”¨æ³•

#### 1. è½¬æ¢å•ä¸ªæ–‡ä»¶

```python
from mdnice import to_wechat

# è½¬æ¢æ–‡ä»¶
html = to_wechat('article.md', theme='rose')

# ä¿å­˜ä¸º HTML
to_wechat(
    'article.md',
    theme='rose',
    output_dir='output'  # è‡ªåŠ¨ä¿å­˜ä¸º output/article_wechat.html
)
```

#### 2. è½¬æ¢ Markdown æ–‡æœ¬

```python
from mdnice import to_wechat

markdown_text = """
# æ ‡é¢˜

è¿™æ˜¯ **Markdown** æ–‡æœ¬ã€‚

```python
print("Hello World")
```
"""

html = to_wechat(markdown_text, theme='geekBlack')
```

#### 3. ä½¿ç”¨ Path å¯¹è±¡

```python
from pathlib import Path
from mdnice import to_wechat

file_path = Path('documents/article.md')
html = to_wechat(file_path, theme='scienceBlue')
```

### æ‰¹é‡è½¬æ¢

```python
from mdnice import to_wechat

files = ['article1.md', 'article2.md', 'article3.md']

# æ‰¹é‡è½¬æ¢ï¼Œéšæœºä¸»é¢˜
html_list = to_wechat(
    files,
    theme='random',
    output_dir='output/batch'
)

print(f"æˆåŠŸè½¬æ¢ {len(html_list)} ä¸ªæ–‡ä»¶")
```

### è‡ªå®šä¹‰ä¸»é¢˜

```python
from mdnice import to_wechat

# æŒ‡å®šä¸»é¢˜
html = to_wechat('article.md', theme='rose', code_theme='monokai')

# å®Œå…¨éšæœº
html = to_wechat('article.md', theme='random')

# ä»åˆ—è¡¨ä¸­éšæœº
html = to_wechat(
    'article.md',
    theme=['rose', 'geekBlack', 'scienceBlue']
)
```

### å¤šå¹³å°è½¬æ¢

```python
from mdnice import to_wechat, to_zhihu, to_juejin

article = 'article.md'

# ä¸€æ–‡å¤šå‘
to_wechat(article, theme='rose', output_dir='output/wechat')
to_zhihu(article, theme='geekBlack', output_dir='output/zhihu')
to_juejin(article, theme='scienceBlue', output_dir='output/juejin')
```

---

## ğŸ¨ ä¸»é¢˜åˆ—è¡¨

### æ–‡ç« ä¸»é¢˜ï¼ˆ20 ç§ï¼‰

| ä¸»é¢˜ä»£ç  | ä¸­æ–‡åç§° | é£æ ¼ | æ¨èåœºæ™¯ |
|---------|---------|------|---------|
| `rose` | è”·è–‡ç´« | ä¼˜é›…ç´«è‰²ç³» | ä¼˜è´¨æ–‡ç«  â­ |
| `geekBlack` | æå®¢é»‘ | ç¨‹åºå‘˜æœ€çˆ± | æŠ€æœ¯åšå®¢ â­ |
| `scienceBlue` | ç§‘æŠ€è“ | ç§‘æŠ€æ„Ÿè“è‰² | ç§‘æŠ€æ–‡ç«  â­ |
| `extremeBlack` | æç®€é»‘ | é»‘ç™½æç®€ | æç®€é£æ ¼ |
| `blueMountain` | å‰ç«¯ä¹‹å·…åŒæ¬¾ | ä¸“ä¸šæŠ€æœ¯ | æŠ€æœ¯åˆ†äº« |
| `normal` | é»˜è®¤ä¸»é¢˜ | ç®€æ´å¤§æ–¹ | é€šç”¨æ–‡ç«  |
| `shanchui` | å±±å¹ | æ¸©æš–é»„è‰² | æ¸©é¦¨å†…å®¹ |
| `fullStackBlue` | å…¨æ ˆè“ | ä¸“ä¸šè“è‰² | æŠ€æœ¯æ–‡ç«  |
| `nightPurple` | å‡å¤œç´« | æ·±é‚ƒç´«è‰² | æ·±åº¦åˆ†æ |
| `cuteGreen` | èŒç»¿ | æ¸…æ–°ç»¿è‰² | è½»æ¾é˜…è¯» |

[æŸ¥çœ‹æ‰€æœ‰ 20 ç§ä¸»é¢˜](https://github.com/xiaoqiangclub/mdnice#å®Œæ•´ä¸»é¢˜åˆ—è¡¨)

### ä»£ç ä¸»é¢˜ï¼ˆ7 ç§ï¼‰

| ä¸»é¢˜ä»£ç  | ä¸»é¢˜åç§° | é£æ ¼ |
|---------|---------|------|
| `atom-one-dark` | Atom One Dark | æ·±è‰²ç»å…¸ï¼ˆé»˜è®¤ï¼‰â­ |
| `monokai` | Monokai | ç»å…¸ Monokai â­ |
| `github` | GitHub | GitHub é£æ ¼ |
| `vs2015` | VS2015 | Visual Studio é£æ ¼ |
| `atom-one-light` | Atom One Light | æµ…è‰²ç»å…¸ |
| `xcode` | Xcode | Xcode ç¼–è¾‘å™¨é£æ ¼ |
| `wechat` | å¾®ä¿¡ä»£ç ä¸»é¢˜ | å¾®ä¿¡å®˜æ–¹é£æ ¼ |

### Mac é£æ ¼ä»£ç å—

```python
from mdnice import to_wechat

# å¯ç”¨ Mac é£æ ¼ï¼ˆé»˜è®¤ï¼‰
html = to_wechat('article.md', mac_style=True)

# ç¦ç”¨ Mac é£æ ¼
html = to_wechat('article.md', mac_style=False)
```

---

## ğŸ“¤ å›¾ç‰‡ä¸Šä¼ 

mdnice æ”¯æŒè‡ªåŠ¨å°†å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠï¼Œé€‚åº”ä¸åŒå¹³å°è¦æ±‚ã€‚

### å¿«é€Ÿå¼€å§‹

```python
from mdnice import to_wechat

def upload_image(image_path: str) -> str:
    """è‡ªå®šä¹‰ä¸Šä¼ å‡½æ•°"""
    # ä½ çš„ä¸Šä¼ é€»è¾‘
    return "https://cdn.example.com/image.jpg"

html = to_wechat(
    'article.md',
    theme='rose',
    image_uploader=upload_image,
    image_upload_mode='local'  # åªä¸Šä¼ æœ¬åœ°å›¾ç‰‡
)
```

### ä½¿ç”¨å†…ç½®å›¾åºŠ

#### 1. SM.MS å›¾åºŠ

```python
from mdnice import to_wechat
from mdnice.image_uploaders import create_smms_uploader

# åˆ›å»ºä¸Šä¼ å™¨
uploader = create_smms_uploader(
    api_token='YOUR_TOKEN',
    api_domain='https://smms.app'  # å›½å†…ä¼˜åŒ–åŸŸå
)

# ä½¿ç”¨
html = to_wechat(
    'article.md',
    image_uploader=uploader,
    image_upload_mode='all'  # ä¸Šä¼ æ‰€æœ‰å›¾ç‰‡
)
```

#### 2. å¾®ä¿¡å…¬ä¼—å·å›¾åºŠ

```python
from mdnice import to_wechat
from mdnice.image_uploaders import create_wechat_uploader, WechatUploadType

# åˆ›å»ºå¾®ä¿¡ä¸Šä¼ å™¨
uploader = create_wechat_uploader(
    app_id='wx1234567890',
    app_secret='your_app_secret',
    upload_type=WechatUploadType.NEWS_IMAGE  # å›¾æ–‡æ¶ˆæ¯å›¾ç‰‡
)

html = to_wechat(
    'article.md',
    image_uploader=uploader,
    image_upload_mode='local'
)
```

**å¾®ä¿¡å›¾åºŠä¸Šä¼ ç±»å‹ï¼š**

- `TEMPORARY` - ä¸´æ—¶ç´ æï¼ˆ3å¤©æœ‰æ•ˆæœŸï¼‰
- `PERMANENT` - æ°¸ä¹…ç´ æ
- `NEWS_IMAGE` - å›¾æ–‡æ¶ˆæ¯å›¾ç‰‡ï¼ˆæ¨èï¼‰âœ¨

#### 3. ä¸ƒç‰›äº‘

```python
from mdnice.image_uploaders import create_qiniu_uploader

uploader = create_qiniu_uploader(
    access_key='YOUR_ACCESS_KEY',
    secret_key='YOUR_SECRET_KEY',
    bucket='your_bucket',
    domain='your-cdn-domain.com'
)
```

#### 4. GitHub å›¾åºŠ

```python
from mdnice.image_uploaders import create_github_uploader

uploader = create_github_uploader(
    token='ghp_your_token',
    repo='username/image-repo',
    branch='main',
    use_jsdelivr=True  # ä½¿ç”¨ CDN åŠ é€Ÿ
)
```

### ä¸Šä¼ æ¨¡å¼

| æ¨¡å¼ | å€¼ | è¯´æ˜ |
|------|-----|------|
| ä»…æœ¬åœ° | `'local'` | åªä¸Šä¼ æœ¬åœ°å›¾ç‰‡ï¼ˆé»˜è®¤ï¼‰ |
| ä»…ç½‘ç»œ | `'remote'` | åªä¸Šä¼ ç½‘ç»œå›¾ç‰‡ |
| å…¨éƒ¨ | `'all'` | ä¸Šä¼ æ‰€æœ‰å›¾ç‰‡ |

---

## ğŸŒ è¿œç¨‹æµè§ˆå™¨

mdnice æ”¯æŒè¿æ¥åˆ°è¿œç¨‹æµè§ˆå™¨æœåŠ¡ï¼Œç‰¹åˆ«é€‚ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²å’Œäº‘å‡½æ•°ç¯å¢ƒã€‚

### ä¸ºä»€ä¹ˆä½¿ç”¨è¿œç¨‹æµè§ˆå™¨ï¼Ÿ

- ğŸ³ **å®¹å™¨ç¯å¢ƒ** - æ— éœ€åœ¨å®¹å™¨ä¸­å®‰è£…æµè§ˆå™¨
- â˜ï¸ **äº‘å‡½æ•°** - AWS Lambdaã€é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ç­‰
- ğŸ’° **èŠ‚çœèµ„æº** - å¤šä¸ªå®ä¾‹å…±äº«ä¸€ä¸ªæµè§ˆå™¨
- âš¡ **æ›´å¿«å¯åŠ¨** - æµè§ˆå™¨å¸¸é©»ï¼Œæ— éœ€æ¯æ¬¡å¯åŠ¨

### æ”¯æŒçš„è¿œç¨‹æµè§ˆå™¨

#### 1. browserlessï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨ browserless
docker run -p 3000:3000 ghcr.io/browserless/chromium
```

```python
from mdnice import to_wechat

# è¿æ¥åˆ° browserless
html = to_wechat(
    'article.md',
    theme='rose',
    browser_ws_endpoint='ws://localhost:3000'
)
```

#### 2. å¸¦ Token çš„ browserless

```python
# æ–¹å¼ 1: ç‹¬ç«‹å‚æ•°
html = to_wechat(
    'article.md',
    browser_ws_endpoint='ws://localhost:3000',
    browser_token='your_secret_token'
)

# æ–¹å¼ 2: URL å‚æ•°
html = to_wechat(
    'article.md',
    browser_ws_endpoint='ws://localhost:3000?token=your_secret_token'
)
```

#### 3. browserless.io äº‘æœåŠ¡

```python
html = to_wechat(
    'article.md',
    browser_ws_endpoint='wss://chrome.browserless.io',
    browser_token='YOUR_API_KEY'
)
```

#### 4. Playwright å®˜æ–¹è¿œç¨‹æµè§ˆå™¨

```python
html = to_wechat(
    'article.md',
    browser_ws_endpoint='ws://localhost:3001',
    browser_connection_type='playwright'
)
```

### Docker Compose éƒ¨ç½²

```yaml
version: '3.8'

services:
  browserless:
    image: ghcr.io/browserless/chromium:latest
    ports:
      - "3000:3000"
    environment:
      - MAX_CONCURRENT_SESSIONS=10
      - CONNECTION_TIMEOUT=60000
      - TOKEN=your_secret_token  # å¯é€‰
    restart: unless-stopped
```

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# ä½¿ç”¨
python your_script.py
```

### è¿æ¥å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `browser_ws_endpoint` | `str` | `None` | WebSocket ç«¯ç‚¹ |
| `browser_type` | `str` | `'chromium'` | æµè§ˆå™¨ç±»å‹ |
| `browser_connection_type` | `str` | `'auto'` | è¿æ¥ç±»å‹ï¼ˆauto/cdp/playwrightï¼‰ |
| `browser_token` | `str` | `None` | è®¿é—®ä»¤ç‰Œ |

---

## ğŸ“š API å‚è€ƒ

### å¹³å°ä¸“ç”¨å‡½æ•°

#### `to_wechat()`

```python
def to_wechat(
    markdown: Union[str, Path, List],
    theme: Union[str, List[str], None] = 'normal',
    code_theme: str = 'atom-one-dark',
    mac_style: bool = True,
    output_dir: Optional[Union[str, Path]] = None,
    return_html: bool = True,
    headless: bool = True,
    wrap_full_html: bool = False,
    retry_count: int = 1,
    on_error: Optional[Callable] = None,
    editor_url: Optional[str] = None,
    image_uploader: Optional[Callable] = None,
    image_upload_mode: str = 'local',
    browser_ws_endpoint: Optional[str] = None,
    browser_type: str = 'chromium',
    browser_connection_type: str = 'auto',
    browser_token: Optional[str] = None,
    clean_html: bool = True
) -> Union[str, List[str], Path, List[Path]]
```

**æ ¸å¿ƒå‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `markdown` | `str/Path/List` | **å¿…éœ€** | Markdown å†…å®¹æˆ–æ–‡ä»¶è·¯å¾„ |
| `theme` | `str/List/None` | `'normal'` | æ–‡ç« ä¸»é¢˜ |
| `code_theme` | `str` | `'atom-one-dark'` | ä»£ç ä¸»é¢˜ |
| `mac_style` | `bool` | `True` | æ˜¯å¦å¯ç”¨ Mac é£æ ¼ |
| `output_dir` | `str/Path/None` | `None` | è¾“å‡ºç›®å½• |
| `clean_html` | `bool` | `True` | æ¸…ç†ç¼–è¾‘å™¨æ ‡è®° |

**å›¾ç‰‡ä¸Šä¼ å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `image_uploader` | `Callable` | `None` | å›¾ç‰‡ä¸Šä¼ å‡½æ•° |
| `image_upload_mode` | `str` | `'local'` | ä¸Šä¼ æ¨¡å¼ï¼ˆlocal/remote/allï¼‰ |

**è¿œç¨‹æµè§ˆå™¨å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `browser_ws_endpoint` | `str` | `None` | WebSocket ç«¯ç‚¹ |
| `browser_token` | `str` | `None` | è®¿é—®ä»¤ç‰Œ |
| `browser_connection_type` | `str` | `'auto'` | è¿æ¥ç±»å‹ |

#### `to_zhihu()` å’Œ `to_juejin()`

å‚æ•°ä¸ `to_wechat()` å®Œå…¨ç›¸åŒã€‚

### é€šç”¨è½¬æ¢å‡½æ•°

```python
from mdnice import convert

html = convert(
    'article.md',
    platform='wechat',  # æˆ– 'zhihu', 'juejin'
    theme='rose'
)
```

### æ ¸å¿ƒç±»

```python
from mdnice import MarkdownConverter

converter = MarkdownConverter(
    headless=True,
    code_theme='monokai',
    mac_style=True,
    browser_ws_endpoint='ws://localhost:3000',
    clean_html=True
)

html = converter.convert('article.md', platform='wechat')
```

---

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. è‡ªå®šä¹‰ç¼–è¾‘å™¨åœ°å€

```python
from mdnice import to_wechat

html = to_wechat(
    'article.md',
    editor_url='https://your-domain.com/markdown-nice/'
)
```

**æ™ºèƒ½å®¹é”™**ï¼šè‡ªå®šä¹‰åœ°å€ â†’ é»˜è®¤åœ°å€ â†’ å¤‡ç”¨åœ°å€

### 2. é”™è¯¯é€šçŸ¥å›è°ƒ

```python
def error_handler(error_msg: str, context: dict):
    print(f"é”™è¯¯ï¼š{error_msg}")
    print(f"é˜¶æ®µï¼š{context.get('stage')}")
    # å‘é€é€šçŸ¥ã€è®°å½•æ—¥å¿—ç­‰

html = to_wechat(
    'article.md',
    on_error=error_handler,
    retry_count=2
)
```

### 3. ç”Ÿæˆå®Œæ•´ HTML æ–‡æ¡£

```python
html = to_wechat(
    'article.md',
    wrap_full_html=True  # åŒ…å« <html>, <head>, <body> ç­‰
)
```

### 4. æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ä¸»é¢˜

```python
from mdnice import MarkdownConverter

# æ–‡ç« ä¸»é¢˜
print("æ–‡ç« ä¸»é¢˜:", MarkdownConverter.AVAILABLE_THEMES)
print("ä¸»é¢˜åç§°:", MarkdownConverter.THEME_NAMES)

# ä»£ç ä¸»é¢˜
print("ä»£ç ä¸»é¢˜:", MarkdownConverter.AVAILABLE_CODE_THEMES)
```

### 5. ç»„åˆå¤šä¸ªé«˜çº§é€‰é¡¹

```python
from mdnice import MarkdownConverter
from mdnice.image_uploaders import create_wechat_uploader, WechatUploadType

# åˆ›å»ºå›¾åºŠä¸Šä¼ å™¨
uploader = create_wechat_uploader(
    app_id='wx123',
    app_secret='secret',
    upload_type=WechatUploadType.NEWS_IMAGE
)

# åˆ›å»ºè½¬æ¢å™¨
converter = MarkdownConverter(
    headless=True,
    wait_timeout=60,
    retry_count=3,
    code_theme='monokai',
    mac_style=True,
    browser_ws_endpoint='ws://localhost:3000',
    browser_token='your_token',
    image_uploader=uploader,
    clean_html=True
)

# è½¬æ¢
html = converter.convert(
    markdown='article.md',
    theme='rose',
    platform='wechat',
    output_dir='output',
    wrap_full_html=True
)
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: Python ç‰ˆæœ¬è¦æ±‚ï¼Ÿ

**A:** mdnice 0.0.3+ éœ€è¦ **Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬**ã€‚

æ£€æŸ¥ç‰ˆæœ¬ï¼š
```bash
python --version  # éœ€è¦ >= 3.10
```

### Q2: é¦–æ¬¡è¿è¡Œæç¤ºå®‰è£…æµè§ˆå™¨ï¼Ÿ

**A:** æ­£å¸¸ç°è±¡ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```bash
playwright install chromium
```

è¿™ä¼šä¸‹è½½çº¦ 200MB çš„ Chromium æµè§ˆå™¨ï¼Œåªéœ€è¿è¡Œä¸€æ¬¡ã€‚

### Q3: æµè§ˆå™¨ä¸‹è½½å¤±è´¥ï¼Ÿ

**A:** å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š

#### æ–¹æ¡ˆ 1: ä½¿ç”¨ä»£ç†

```bash
# Linux/macOS
export HTTPS_PROXY=http://your-proxy:port

# Windows (PowerShell)
$env:HTTPS_PROXY="http://your-proxy:port"

# ç„¶åå®‰è£…
playwright install chromium
```

#### æ–¹æ¡ˆ 2: ä½¿ç”¨è¿œç¨‹æµè§ˆå™¨

```python
# æ— éœ€æœ¬åœ°å®‰è£…æµè§ˆå™¨
html = to_wechat(
    'article.md',
    browser_ws_endpoint='ws://localhost:3000'
)
```

### Q4: å¦‚ä½•æŸ¥çœ‹ Playwright æµè§ˆå™¨ä½ç½®ï¼Ÿ

```bash
# æŸ¥çœ‹å·²å®‰è£…çš„æµè§ˆå™¨
playwright show-browsers

# é»˜è®¤ä½ç½®ï¼š
# Windows: %USERPROFILE%\AppData\Local\ms-playwright
# Linux: ~/.cache/ms-playwright
# macOS: ~/Library/Caches/ms-playwright
```

### Q5: å›¾ç‰‡ä¸Šä¼ å¤±è´¥æ€ä¹ˆå¤„ç†ï¼Ÿ

**A:** å›¾ç‰‡ä¸Šä¼ å¤±è´¥ä¸ä¼šå½±å“æ•´ä½“è½¬æ¢ï¼Œå¤±è´¥çš„å›¾ç‰‡ä¼šä¿æŒåŸæ ·ã€‚å»ºè®®ï¼š

```python
def safe_uploader(image_path: str) -> str:
    try:
        return upload(image_path)
    except Exception as e:
        print(f"ä¸Šä¼ å¤±è´¥: {e}")
        return image_path  # å¤±è´¥è¿”å›åŸè·¯å¾„
```

### Q6: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ

**A:** æ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼ï¼š`.jpg`, `.jpeg`, `.png`, `.gif`, `.bmp`, `.webp`, `.svg`

### Q7: Windows ä¸‹è·¯å¾„é—®é¢˜ï¼Ÿ

**A:** ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼š

```python
# åŸå§‹å­—ç¬¦ä¸²
html = to_wechat(r'D:\Documents\article.md')

# æ­£æ–œæ 
html = to_wechat('D:/Documents/article.md')

# Path å¯¹è±¡ï¼ˆæ¨èï¼‰
from pathlib import Path
html = to_wechat(Path('D:/Documents/article.md'))
```

### Q8: å¦‚ä½•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Ÿ

```bash
# å¸è½½æµè§ˆå™¨
playwright uninstall

# é‡æ–°å®‰è£…
playwright install chromium
```

### Q9: è¿œç¨‹æµè§ˆå™¨è¿æ¥å¤±è´¥ï¼Ÿ

**A:** æ£€æŸ¥æ¸…å•ï¼š

1. æµè§ˆå™¨æœåŠ¡æ˜¯å¦è¿è¡Œï¼š`curl http://localhost:3000/`
2. WebSocket ç«¯ç‚¹æ˜¯å¦æ­£ç¡®
3. Token æ˜¯å¦æœ‰æ•ˆï¼ˆå¦‚æœéœ€è¦ï¼‰
4. ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

### Q10: å¦‚ä½•ç¦ç”¨ HTML æ¸…ç†ï¼Ÿ

```python
# ä¿ç•™ç¼–è¾‘å™¨æ ‡è®°ï¼ˆå¦‚æœéœ€è¦ï¼‰
html = to_wechat('article.md', clean_html=False)
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.0.3

**ğŸ‰ é‡å¤§æ›´æ–°**

#### æ–°å¢åŠŸèƒ½

- âœ¨ **è¿ç§»åˆ° Playwright** - æ›¿ä»£ Seleniumï¼Œæ€§èƒ½æ›´å¥½æ›´ç¨³å®š
  - å†…ç½®æµè§ˆå™¨é©±åŠ¨ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
  - æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦
  - æ›´å‹å¥½çš„ API
- âœ¨ **ä»£ç ä¸»é¢˜æ”¯æŒ** - æ–°å¢ 7 ç§ä»£ç é«˜äº®ä¸»é¢˜
  - `wechat`, `atom-one-dark`, `atom-one-light`
  - `monokai`, `github`, `vs2015`, `xcode`
- âœ¨ **Mac é£æ ¼ä»£ç å—** - å¯é€‰çš„ macOS é£æ ¼è£…é¥°
- âœ¨ **è¿œç¨‹æµè§ˆå™¨æ”¯æŒ** - å®Œç¾æ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²
  - browserlessï¼ˆCDP åè®®ï¼‰
  - Playwright å®˜æ–¹è¿œç¨‹æµè§ˆå™¨
  - è‡ªåŠ¨æ£€æµ‹è¿æ¥ç±»å‹
  - Token è®¤è¯æ”¯æŒ
- âœ¨ **å¾®ä¿¡å…¬ä¼—å·å›¾åºŠ** - æ–°å¢å¾®ä¿¡å›¾åºŠä¸Šä¼ å™¨
  - ä¸´æ—¶ç´ æã€æ°¸ä¹…ç´ æã€å›¾æ–‡æ¶ˆæ¯å›¾ç‰‡
  - è‡ªåŠ¨ Token ç®¡ç†å’Œç¼“å­˜
  - æ”¯æŒæœåŠ¡å™¨è·å– Token
- âœ¨ **HTML æ¸…ç†** - è‡ªåŠ¨ç§»é™¤ç¼–è¾‘å™¨æ ‡è®°
  - ç§»é™¤ `data-tool="mdniceç¼–è¾‘å™¨"`
  - ç§»é™¤ `data-website` ç­‰å±æ€§
  - æ›´ç®€æ´çš„ HTML ä»£ç 

#### æ”¹è¿›

- âš¡ **æ€§èƒ½æå‡** - Playwright æ¯” Selenium å¿« 30%+
- ğŸ›¡ï¸ **ç¨³å®šæ€§å¢å¼º** - æ›´å¯é çš„å…ƒç´ å®šä½å’Œæ“ä½œ
- ğŸ“ **ä»£ç è´¨é‡** - æ¶ˆé™¤æ‰€æœ‰ç±»å‹æ£€æŸ¥è­¦å‘Š
- ğŸ¨ **ç”¨æˆ·ä½“éªŒ** - æ›´å‹å¥½çš„æ—¥å¿—è¾“å‡º

#### ç ´åæ€§å˜æ›´

- âš ï¸ **Python ç‰ˆæœ¬è¦æ±‚** - ä» 3.8+ æå‡åˆ° **3.10+**
- âš ï¸ **ä¾èµ–å˜æ›´** - ä» Selenium è¿ç§»åˆ° Playwright
- âš ï¸ **å®‰è£…æ­¥éª¤** - éœ€è¦è¿è¡Œ `playwright install chromium`

#### è¿ç§»æŒ‡å—

ä» v0.0.2 å‡çº§ï¼š

```bash
# 1. æ£€æŸ¥ Python ç‰ˆæœ¬
python --version  # éœ€è¦ >= 3.10

# 2. å‡çº§ mdnice
pip install --upgrade mdnice

# 3. å®‰è£… Playwright æµè§ˆå™¨
playwright install chromium

# 4. ä»£ç æ— éœ€ä¿®æ”¹ï¼ˆAPI å‘åå…¼å®¹ï¼‰
```

### v0.0.2

#### æ–°å¢

- âœ¨ å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ åŠŸèƒ½
- âœ¨ å¤šå›¾åºŠæ”¯æŒï¼ˆ8 ç§ï¼‰
- ğŸ”§ ä¾¿æ·å‡½æ•°

### v0.0.1

**ğŸ‰ é¦–æ¬¡å‘å¸ƒ**

- âœ¨ æ”¯æŒå¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ã€ç¨€åœŸæ˜é‡‘
- âœ¨ 20 ç§ç²¾ç¾ä¸»é¢˜
- âœ¨ æ‰¹é‡è½¬æ¢åŠŸèƒ½

---

## ğŸ’– æ‰“èµæ”¯æŒ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿æ‰“èµæ”¯æŒï¼ä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­æ›´æ–°çš„åŠ¨åŠ› ğŸ’ª

<div align="center">

![æ‰“èµæ”¯æŒ](https://s2.loli.net/2025/11/10/lQRcAvN3Lgxukqb.png)

**æ‰«ç æ‰“èµ | æ”¯æŒä½œè€… | æŒç»­æ›´æ–°**

</div>

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [markdown-nice](https://github.com/whaoa/markdown-nice) - ä¼˜ç§€çš„ Markdown ç¼–è¾‘å™¨
- [Playwright](https://playwright.dev/) - ç°ä»£åŒ–çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–æ¡†æ¶
- [Poetry](https://python-poetry.org/) - Python ä¾èµ–ç®¡ç†å·¥å…·

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨è€…çš„æ”¯æŒï¼â­

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

---

<div align="center">

**Made with â¤ï¸ by [xiaoqiang](https://github.com/xiaoqiangclub)**

**æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šXiaoqiangClub**

[â¬† å›åˆ°é¡¶éƒ¨](#-mdnice)

</div>